# 🎵 Web Drum Pad 仕様書 v1.0

## 1. プロジェクト概要

| 項目 | 内容 |
|------|------|
| **プロジェクト名** | Web Drum Pad |
| **目的** | ブラウザ上で動作する音楽パッドコントローラー |
| **対象デバイス** | PC、タブレット、スマートフォン |
| **対象ブラウザ** | Chrome、Safari、Edge、Firefox（最新版） |
| **デプロイ先** | Vercel |

---

## 2. 機能一覧

### 2.1 パッドコントローラー機能

| 機能 | 詳細 |
|------|------|
| パッド数 | 16個（4×4グリッド） |
| 操作方法 | タップ / クリック / キーボードショートカット |
| 同時発音 | 最大8音（ポリフォニック） |
| ビジュアルフィードバック | タップ時にパッドが光る |

### 2.2 音源設定

| 項目 | 詳細 |
|------|------|
| プリセット音源数 | 約40種類 |
| カテゴリ | ドラムキット / シンセ・ベース / パーカッション・FX |
| 音の割り当て | 各パッドに自由に割り当て可能 |
| ボリューム調整 | パッドごとに個別設定可能 |

### 2.3 シーケンサー機能

| 項目 | 詳細 |
|------|------|
| ステップ数 | 16ステップ（1小節） |
| BPM設定 | 60〜200 BPM（可変） |
| ループ再生 | ON/OFF切り替え |
| メトロノーム | ON/OFF切り替え |
| パターン保存 | 最大8パターン |

### 2.4 録音機能

| 項目 | 詳細 |
|------|------|
| 録音形式 | MP3 |
| 最大録音時間 | 5分 |
| ダウンロード | ボタン1クリックで保存 |

### 2.5 設定保存

| 項目 | 詳細 |
|------|------|
| 保存方式 | localStorage（ブラウザ保存） |
| 保存内容 | パッド配置、音量、BPM、シーケンスパターン |
| リセット機能 | デフォルト設定に戻す |

---

## 3. 音源リスト（40音）

### 🥁 ドラムキット（20音）

| # | 音名 | 説明 |
|---|------|------|
| 1 | Kick Deep | 深いキック |
| 2 | Kick Tight | タイトなキック |
| 3 | Kick 808 | 808風キック |
| 4 | Snare Acoustic | アコースティックスネア |
| 5 | Snare Electronic | エレクトロスネア |
| 6 | Snare Rim | リムショット |
| 7 | Clap | ハンドクラップ |
| 8 | Hi-Hat Closed | クローズドハイハット |
| 9 | Hi-Hat Open | オープンハイハット |
| 10 | Hi-Hat Pedal | ペダルハイハット |
| 11 | Crash | クラッシュシンバル |
| 12 | Ride | ライドシンバル |
| 13 | Tom High | ハイタム |
| 14 | Tom Mid | ミッドタム |
| 15 | Tom Low | ロータム |
| 16 | Floor Tom | フロアタム |
| 17 | Cowbell | カウベル |
| 18 | Tambourine | タンバリン |
| 19 | Shaker | シェイカー |
| 20 | Cross Stick | クロススティック |

### 🎹 シンセ・ベース（12音）

| # | 音名 | 説明 |
|---|------|------|
| 21 | Bass 808 | 808ベース |
| 22 | Bass Sub | サブベース |
| 23 | Bass Wobble | ワブルベース |
| 24 | Synth Lead | シンセリード |
| 25 | Synth Pluck | プラック音 |
| 26 | Synth Stab | スタブ音 |
| 27 | Synth Pad | パッド音 |
| 28 | Synth Arp | アルペジオ |
| 29 | Piano Hit | ピアノヒット |
| 30 | Organ Stab | オルガンスタブ |
| 31 | Brass Hit | ブラスヒット |
| 32 | String Hit | ストリングスヒット |

### 🎭 パーカッション・FX（8音）

| # | 音名 | 説明 |
|---|------|------|
| 33 | Conga High | コンガ（高） |
| 34 | Conga Low | コンガ（低） |
| 35 | Bongo | ボンゴ |
| 36 | Djembe | ジャンベ |
| 37 | FX Rise | ライザーFX |
| 38 | FX Down | ダウンFX |
| 39 | FX Noise | ノイズFX |
| 40 | FX Laser | レーザー音 |

---

## 4. UI設計（画面構成）

### メイン画面レイアウト

```
┌─────────────────────────────────────────────────────┐
│  🎵 Web Drum Pad                    [⚙️設定] [❓ヘルプ] │
├─────────────────────────────────────────────────────┤
│                                                     │
│   ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐              │
│   │  1   │ │  2   │ │  3   │ │  4   │   BPM: 120   │
│   │ Kick │ │Snare │ │ HH-C │ │ HH-O │   [- ] [+ ]  │
│   └──────┘ └──────┘ └──────┘ └──────┘              │
│   ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐              │
│   │  5   │ │  6   │ │  7   │ │  8   │  ┌─────────┐ │
│   │ Clap │ │ Tom  │ │Crash │ │ Ride │  │ ▶️ PLAY │ │
│   └──────┘ └──────┘ └──────┘ └──────┘  └─────────┘ │
│   ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐  ┌─────────┐ │
│   │  9   │ │ 10   │ │ 11   │ │ 12   │  │ ⏹️ STOP │ │
│   │ 808  │ │ Bass │ │Synth │ │ Stab │  └─────────┘ │
│   └──────┘ └──────┘ └──────┘ └──────┘              │
│   ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐  ┌─────────┐ │
│   │ 13   │ │ 14   │ │ 15   │ │ 16   │  │ 🔴 REC  │ │
│   │Conga │ │Bongo │ │ FX1  │ │ FX2  │  └─────────┘ │
│   └──────┘ └──────┘ └──────┘ └──────┘              │
│                                                     │
├─────────────────────────────────────────────────────┤
│  SEQUENCER                                          │
│  ┌─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┐                │
│  │●│○│○│○│●│○│○│○│●│○│○│○│●│○│○│○│ Kick          │
│  ├─┼─┼─┼─┼─┼─┼─┼─┼─┼─┼─┼─┼─┼─┼─┼─┤                │
│  │○│○│○│○│●│○│○│○│○│○│○│○│●│○│○│○│ Snare         │
│  ├─┼─┼─┼─┼─┼─┼─┼─┼─┼─┼─┼─┼─┼─┼─┼─┤                │
│  │●│○│●│○│●│○│●│○│●│○│●│○│●│○│●│○│ HiHat         │
│  └─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴─┘                │
│  Pattern: [1][2][3][4][5][6][7][8]                  │
└─────────────────────────────────────────────────────┘
```

### レスポンシブ対応

| デバイス | パッドサイズ | レイアウト |
|----------|------------|-----------|
| PC（1024px以上） | 100px × 100px | 横並び（パッド + コントロール） |
| タブレット（768px〜1023px） | 80px × 80px | 横並び（コンパクト） |
| スマートフォン（767px以下） | 70px × 70px | 縦並び（パッド → コントロール → シーケンサー） |

---

## 5. 技術スタック

### フロントエンド

| 技術 | 用途 | 理由 |
|------|------|------|
| **React 18** | UIフレームワーク | コンポーネント管理が容易 |
| **Vite** | ビルドツール | 高速な開発環境 |
| **Tailwind CSS** | スタイリング | レスポンシブ対応が簡単 |
| **Tone.js** | 音声処理 | Web Audio APIのラッパー、高機能 |
| **lamejs** | MP3エンコード | ブラウザ内でMP3変換 |

### データ保存

| 技術 | 用途 |
|------|------|
| **localStorage** | ユーザー設定・パターン保存 |

### 開発ツール

| ツール | 用途 |
|--------|------|
| **ESLint** | コード品質チェック |
| **Prettier** | コードフォーマット |
| **TypeScript** | 型安全性（オプション） |

---

## 6. デプロイ環境

### Vercel（採用）

| 項目 | 詳細 |
|------|------|
| **サービス** | Vercel |
| **料金** | 無料（Hobbyプラン） |
| **無料枠** | 月間100GB帯域幅 |
| **デプロイ方法** | GitHubリポジトリ連携（自動デプロイ） |
| **HTTPS** | 自動設定 |
| **カスタムドメイン** | 対応可能 |
| **CDN** | グローバルエッジネットワーク |

### デプロイ手順

1. GitHubリポジトリを作成
2. Vercelアカウント作成（GitHub連携）
3. リポジトリをインポート
4. ビルド設定（自動検出）
5. デプロイ完了

### 環境変数（必要に応じて）

```
# .env.local
VITE_APP_NAME=Web Drum Pad
VITE_APP_VERSION=1.0.0
```

---

## 7. キーボードショートカット（PC用）

### パッド操作

```
┌───┬───┬───┬───┐
│ 1 │ 2 │ 3 │ 4 │  ← パッド 1-4
├───┼───┼───┼───┤
│ Q │ W │ E │ R │  ← パッド 5-8
├───┼───┼───┼───┤
│ A │ S │ D │ F │  ← パッド 9-12
├───┼───┼───┼───┤
│ Z │ X │ C │ V │  ← パッド 13-16
└───┴───┴───┴───┘
```

### コントロール

| キー | 機能 |
|------|------|
| `Space` | 再生 / 停止 |
| `Enter` | 録音開始 / 停止 |
| `←` / `→` | BPM -1 / +1 |
| `↑` / `↓` | BPM -10 / +10 |
| `M` | メトロノーム ON/OFF |
| `L` | ループ ON/OFF |
| `1-8`（テンキー） | パターン選択 |

---

## 8. データ構造

### localStorage保存形式

```json
{
  "webDrumPad": {
    "version": "1.0.0",
    "settings": {
      "bpm": 120,
      "volume": 0.8,
      "metronome": false,
      "loop": true
    },
    "pads": [
      {
        "id": 1,
        "soundId": "kick-deep",
        "volume": 1.0,
        "color": "#FF5733"
      }
    ],
    "patterns": [
      {
        "id": 1,
        "name": "Pattern 1",
        "steps": {
          "1": [1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0],
          "2": [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0]
        }
      }
    ],
    "currentPattern": 1
  }
}
```

---

## 9. 音源ファイル仕様

### ファイル形式

| 項目 | 仕様 |
|------|------|
| **フォーマット** | MP3 または WAV |
| **サンプルレート** | 44.1kHz |
| **ビット深度** | 16bit |
| **チャンネル** | モノラル または ステレオ |
| **長さ** | 0.1秒 〜 2秒程度 |

### ファイル配置

```
public/
└── sounds/
    ├── drums/
    │   ├── kick-deep.mp3
    │   ├── kick-tight.mp3
    │   ├── kick-808.mp3
    │   └── ...
    ├── synth/
    │   ├── bass-808.mp3
    │   ├── bass-sub.mp3
    │   └── ...
    └── fx/
        ├── fx-rise.mp3
        ├── fx-down.mp3
        └── ...
```

---

## 10. 開発フェーズ

| Phase | 内容 | 期間目安 | 詳細 |
|-------|------|----------|------|
| **Phase 1** | プロジェクトセットアップ | 0.5日 | Vite + React + Tailwind初期設定 |
| **Phase 2** | パッドUI + 音再生 | 1-2日 | 16パッドの表示、Tone.jsで音再生 |
| **Phase 3** | 音源選択 + 設定画面 | 1-2日 | 40音源の選択UI、パッド設定 |
| **Phase 4** | localStorage保存 | 0.5日 | 設定の保存・読み込み |
| **Phase 5** | シーケンサー機能 | 2-3日 | 16ステップシーケンサー、パターン保存 |
| **Phase 6** | 録音機能 | 1-2日 | MP3録音・ダウンロード |
| **Phase 7** | キーボードショートカット | 0.5日 | PC用ショートカット実装 |
| **Phase 8** | レスポンシブ対応 | 1日 | スマホ・タブレット最適化 |
| **Phase 9** | テスト + バグ修正 | 1日 | 各デバイスでの動作確認 |
| **Phase 10** | Vercelデプロイ | 0.5日 | 本番環境デプロイ |

**合計目安: 10-14日**

---

## 11. ディレクトリ構成

```
web-drum-pad/
├── public/
│   ├── sounds/           # 音源ファイル
│   │   ├── drums/
│   │   ├── synth/
│   │   └── fx/
│   └── favicon.ico
├── src/
│   ├── components/       # UIコンポーネント
│   │   ├── Pad.jsx
│   │   ├── PadGrid.jsx
│   │   ├── Sequencer.jsx
│   │   ├── Controls.jsx
│   │   ├── Settings.jsx
│   │   └── Recorder.jsx
│   ├── hooks/            # カスタムフック
│   │   ├── useAudio.js
│   │   ├── useSequencer.js
│   │   ├── useRecorder.js
│   │   └── useLocalStorage.js
│   ├── utils/            # ユーティリティ
│   │   ├── soundData.js
│   │   └── constants.js
│   ├── styles/           # スタイル
│   │   └── index.css
│   ├── App.jsx
│   └── main.jsx
├── .gitignore
├── index.html
├── package.json
├── tailwind.config.js
├── vite.config.js
└── README.md
```

---

## 12. 将来の拡張案（オプション）

| 機能 | 説明 | 優先度 |
|------|------|--------|
| ユーザーアカウント | クラウド保存対応 | 中 |
| 音源アップロード | 自分の音をアップロード | 中 |
| プリセットキット | Hip-Hop / EDM / Acoustic切り替え | 高 |
| 共有URL | 作ったパターンを共有 | 中 |
| MIDI入力 | 外部MIDIコントローラー対応 | 低 |
| エフェクト | リバーブ、ディレイ等 | 低 |
| 複数小節 | 2-4小節のパターン対応 | 中 |

---

## 13. 参考リンク

- [Tone.js Documentation](https://tonejs.github.io/)
- [Vite Documentation](https://vitejs.dev/)
- [Tailwind CSS Documentation](https://tailwindcss.com/)
- [Vercel Documentation](https://vercel.com/docs)
- [Web Audio API - MDN](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API)

---

## 更新履歴

| バージョン | 日付 | 内容 |
|-----------|------|------|
| 1.0.0 | 2024-XX-XX | 初版作成 |

---

*このドキュメントはWeb Drum Padプロジェクトの仕様書です。*
